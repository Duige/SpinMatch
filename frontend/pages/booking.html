<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çº¦çƒä¸­å¿ƒ - SpinMatch</title>
    
    <!-- è®¤è¯æ¨¡å— -->
    <script src="../scripts/auth-module.js"></script>
    
    <!-- é˜²é—ªç™½çš„å…³é”®CSS - å¿…é¡»åœ¨æœ€å‰é¢ -->
    <style>
        html { background-color: #1a1a1a !important; }
        body { background-color: #1a1a1a !important; opacity: 1 !important; }
    </style>
    
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/booking.css">
    <link rel="stylesheet" href="../styles/page-transitions.css">
    <link rel="stylesheet" href="../styles/auth-styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- å¯¼èˆªæ å±…ä¸­æ ·å¼ -->
    <style>
        /* ç¡®ä¿å¯¼èˆªæ åœ¨æœ€ä¸Šå±‚ï¼Œä½†å¢åŠ é€æ˜åº¦ */
        .navbar {
            position: fixed !important;
            top: 0 !important;
            width: 100% !important;
            z-index: 1000 !important;
            background: rgba(0, 0, 0, 0.3) !important;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            padding: 1rem 0 !important;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        /* å¯¼èˆªå®¹å™¨å±…ä¸­å¸ƒå±€ */
        .nav-container {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            max-width: 1200px !important;
            margin: 0 auto !important;
            padding: 0 20px !important;
            position: relative !important;
            height: auto !important;
        }

        /* ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºæ ·å¼ */
        .user-profile {
            display: none;
            align-items: center;
            gap: 10px;
            color: white;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .user-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .user-name {
            font-weight: 500;
            font-size: 14px;
        }

        .user-level {
            font-size: 12px;
            color: #FFD700;
        }

        /* ç™»å½•æç¤ºæ ·å¼ */
        .login-prompt {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .login-prompt-content {
            background: #2a2a2a;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            color: white;
            max-width: 400px;
            margin: 20px;
        }

        .login-prompt-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }

        /* å¯¼èˆªèœå•å±…ä¸­ */
        .nav-menu {
            display: flex !important;
            list-style: none !important;
            gap: 3rem !important;
            margin: 0 !important;
            padding: 0 !important;
            position: absolute !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            align-items: center !important;
        }

        .nav-menu li {
            list-style: none !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        /* ç™»å½•æ³¨å†ŒæŒ‰é’®æ”¾åœ¨å³ä¾§ */
        .nav-auth {
            display: flex !important;
            gap: 1rem !important;
            margin-left: auto !important;
            z-index: 10 !important;
            align-items: center !important;
        }

        /* å¯¼èˆªæ æ‚¬åœæ•ˆæœ */
        .navbar:hover {
            background: rgba(0, 0, 0, 0.4) !important;
        }

        /* å¯¼èˆªé“¾æ¥æ ·å¼ç®€åŒ– */
        .nav-menu a {
            color: white !important;
            font-weight: 500 !important;
            transition: all 0.3s ease !important;
            position: relative !important;
            padding: 8px 16px !important;
            border-radius: 15px !important;
            text-decoration: none !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            height: auto !important;
            white-space: nowrap !important;
        }

        .nav-menu a:hover {
            color: #FFD700 !important;
            background: rgba(255, 215, 0, 0.1) !important;
            transform: translateY(-2px) !important;
        }

        .nav-menu a.active {
            color: #DC143C !important;
            background: rgba(220, 20, 60, 0.1) !important;
        }

        /* æ·»åŠ æ‚¬åœä¸‹åˆ’çº¿æ•ˆæœ */
        .nav-menu a::after {
            content: '' !important;
            position: absolute !important;
            bottom: -5px !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            width: 0 !important;
            height: 2px !important;
            background: #FFD700 !important;
            transition: width 0.3s ease !important;
        }

        .nav-menu a:hover::after {
            width: 80% !important;
        }

        .nav-menu a.active::after {
            width: 80% !important;
            background: #DC143C !important;
        }

        /* ç™»å½•æ³¨å†ŒæŒ‰é’®æ ·å¼ç®€åŒ– */
        .btn-login, .btn-register {
            padding: 8px 18px !important;
            border-radius: 20px !important;
            font-weight: 600 !important;
            transition: all 0.3s ease !important;
            border: 2px solid transparent !important;
            font-size: 14px !important;
            text-shadow: none !important;
            cursor: pointer !important;
            text-decoration: none !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            white-space: nowrap !important;
        }

        .btn-login {
            background: linear-gradient(45deg, #FF6B35, #DC143C) !important;
            color: white !important;
            box-shadow: 0 3px 12px rgba(220, 20, 60, 0.4) !important;
            border: 2px solid rgba(255, 255, 255, 0.2) !important;
        }

        .btn-login:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 20px rgba(220, 20, 60, 0.6) !important;
            border: 2px solid rgba(255, 255, 255, 0.4) !important;
        }

        .btn-register {
            background: linear-gradient(45deg, #FFD700, #FFA500) !important;
            color: #1a1a1a !important;
            box-shadow: 0 3px 12px rgba(255, 215, 0, 0.4) !important;
            border: 2px solid rgba(255, 255, 255, 0.2) !important;
            font-weight: 700 !important;
        }

        .btn-register:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6) !important;
            border: 2px solid rgba(255, 255, 255, 0.4) !important;
        }

        /* æ±‰å ¡èœå•æŒ‰é’®å¢å¼º */
        .hamburger {
            display: none !important;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .nav-menu {
                display: none !important;
                position: static !important;
                transform: none !important;
            }
            
            .nav-auth {
                margin-left: 0 !important;
            }
            
            .nav-container {
                justify-content: space-between !important;
            }
        }

        /* ===== æ¨¡æ€æ¡†æ ·å¼ ===== */
        .modal {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: rgba(0, 0, 0, 0.8) !important;
            display: none !important;
            justify-content: center !important;
            align-items: center !important;
            z-index: 10000 !important;
        }
        
        .modal.show { display: flex !important; }

        /* ===== é€šç”¨æ¨¡æ€æ¡†å†…å®¹æ ·å¼ ===== */
        .modal-content {
            background: white !important;
            border-radius: 15px !important;
            padding: 2rem !important;
            max-width: 400px !important;
            width: 90% !important;
            max-height: 90vh !important;
            overflow-y: auto !important;
            position: relative !important;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;
        }

        .modal-content .close {
            position: absolute !important;
            right: 20px !important;
            top: 20px !important;
            width: 30px !important;
            height: 30px !important;
            border-radius: 50% !important;
            background: rgba(220, 20, 60, 0.1) !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 18px !important;
            color: #DC143C !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            border: 2px solid #DC143C !important;
            font-weight: bold !important;
        }

        .modal-content .close:hover {
            background: #DC143C !important;
            color: white !important;
            transform: scale(1.1) !important;
        }

        /* ===== è®¤è¯è¡¨å•æ ·å¼ ===== */
        .auth-form {
            width: 100% !important;
        }

        .auth-form h2 {
            text-align: center !important;
            margin-bottom: 1.5rem !important;
            color: #333 !important;
            font-size: 1.5rem !important;
            font-weight: 600 !important;
        }

        .auth-form .form-group {
            margin-bottom: 1rem !important;
        }

        .auth-form .form-group label {
            display: block !important;
            margin-bottom: 0.5rem !important;
            font-weight: 500 !important;
            color: #374151 !important;
        }

        .auth-form .form-group input,
        .auth-form .form-group select {
            width: 100% !important;
            padding: 12px 16px !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 8px !important;
            font-size: 16px !important;
            transition: all 0.3s ease !important;
            background: #fff !important;
            box-sizing: border-box !important;
        }

        .auth-form .form-group input:focus,
        .auth-form .form-group select:focus {
            outline: none !important;
            border-color: #DC143C !important;
            box-shadow: 0 0 0 3px rgba(220, 20, 60, 0.1) !important;
        }

        .auth-form .checkbox-label {
            display: flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
            cursor: pointer !important;
        }

        .auth-form .btn-primary {
            width: 100% !important;
            padding: 12px !important;
            background: linear-gradient(135deg, #DC143C, #B91C3C) !important;
            color: white !important;
            border: none !important;
            border-radius: 8px !important;
            font-size: 16px !important;
            font-weight: 600 !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            margin-top: 1rem !important;
        }

        .auth-form .btn-primary:hover {
            background: linear-gradient(135deg, #B91C3C, #A01B3D) !important;
            transform: translateY(-1px) !important;
            box-shadow: 0 4px 12px rgba(220, 20, 60, 0.3) !important;
        }

        .auth-form .auth-switch {
            text-align: center !important;
            margin-top: 1rem !important;
            color: #666 !important;
            font-size: 14px !important;
        }

        .auth-form .auth-switch a {
            color: #DC143C !important;
            text-decoration: none !important;
            font-weight: 500 !important;
        }

        .auth-form .auth-switch a:hover {
            text-decoration: underline !important;
        }

        /* ===== ç”¨æˆ·èœå•æ ·å¼ ===== */
        .user-menu {
            display: flex !important;
            align-items: center !important;
            gap: 1rem !important;
        }
        
        .username {
            color: white !important;
            font-weight: 500 !important;
            font-size: 14px !important;
        }
        
        .btn-logout {
            padding: 8px 18px !important;
            border-radius: 20px !important;
            font-weight: 600 !important;
            transition: all 0.3s ease !important;
            border: 2px solid #ff6b6b !important;
            font-size: 14px !important;
            cursor: pointer !important;
            text-decoration: none !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            white-space: nowrap !important;
            background: rgba(255, 107, 107, 0.1) !important;
            color: #ff6b6b !important;
        }
        
        .btn-logout:hover {
            background: #ff6b6b !important;
            color: white !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3) !important;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <ul class="nav-menu">
                <li><a href="index.html">é¦–é¡µ</a></li>
                <li><a href="booking.html" class="active">çº¦çƒ</a></li>
                <li><a href="events.html">èµ›äº‹</a></li>
                <li><a href="community.html">ç¤¾åŒº</a></li>
                <li><a href="news.html">èµ„è®¯</a></li>
                <li><a href="profile.html">æˆ‘çš„</a></li>
            </ul>
            <div class="nav-auth">
                <button class="btn-login" onclick="openModal('loginModal')">ç™»å½•</button>
                <button class="btn-register" onclick="openModal('registerModal')">æ³¨å†Œ</button>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- é¡µé¢å¤´éƒ¨ -->
    <section class="page-header">
        <div class="container">
            <h1>çº¦çƒä¸­å¿ƒ</h1>
            <p>æ‰¾åˆ°å¿—åŒé“åˆçš„çƒå‹ï¼Œå¼€å§‹ç²¾å½©çš„ä¹’ä¹“ä¹‹æ—…</p>
            <div class="header-actions">
                <button class="btn-primary" onclick="openModal('createBookingModal')">
                    <i class="fas fa-plus"></i>
                    å‘å¸ƒçº¦çƒ
                </button>
                <button class="btn-secondary" onclick="toggleFilters()">
                    <i class="fas fa-filter"></i>
                    ç­›é€‰
                </button>
            </div>
        </div>
    </section>

    <!-- ç­›é€‰åŒºåŸŸ -->
    <section class="filters-section" id="filtersSection">
        <div class="container">
            <div class="filters-grid">
                <div class="filter-group">
                    <label>åœ°åŒº</label>
                    <select id="locationFilter">
                        <option value="">å…¨éƒ¨åœ°åŒº</option>
                        <option value="beijing">åŒ—äº¬</option>
                        <option value="shanghai">ä¸Šæµ·</option>
                        <option value="guangzhou">å¹¿å·</option>
                        <option value="shenzhen">æ·±åœ³</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>æŠ€æœ¯æ°´å¹³</label>
                    <select id="levelFilter">
                        <option value="">å…¨éƒ¨æ°´å¹³</option>
                        <option value="beginner">åˆå­¦è€…</option>
                        <option value="intermediate">ä¸­çº§</option>
                        <option value="advanced">é«˜çº§</option>
                        <option value="professional">ä¸“ä¸š</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>æ—¶é—´</label>
                    <select id="timeFilter">
                        <option value="">ä»»ä½•æ—¶é—´</option>
                        <option value="morning">ä¸Šåˆ</option>
                        <option value="afternoon">ä¸‹åˆ</option>
                        <option value="evening">æ™šä¸Š</option>
                        <option value="weekend">å‘¨æœ«</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>çº¦çƒç±»å‹</label>
                    <select id="typeFilter">
                        <option value="">å…¨éƒ¨ç±»å‹</option>
                        <option value="casual">ä¼‘é—²å¨±ä¹</option>
                        <option value="training">æŠ€æœ¯è®­ç»ƒ</option>
                        <option value="competition">æ¯”èµ›åˆ‡ç£‹</option>
                    </select>
                </div>
            </div>
        </div>
    </section>

    <!-- çº¦çƒåˆ—è¡¨ -->
    <section class="bookings-section">
        <div class="container">
            <div class="section-header">
                <h2>æœ€æ–°çº¦çƒ</h2>
                <div class="view-toggle">
                    <button class="view-btn active" data-view="grid">
                        <i class="fas fa-th-large"></i>
                    </button>
                    <button class="view-btn" data-view="list">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
            </div>
            
            <div class="bookings-grid" id="bookingsGrid">
                <!-- çº¦çƒå¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                <div class="loading-placeholder" style="text-align: center; padding: 50px; color: #666;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 10px;"></i>
                    <p>æ­£åœ¨åŠ è½½çº¦çƒä¿¡æ¯...</p>
                </div>
            </div>

            <!-- åŠ è½½æ›´å¤š -->
            <div class="load-more">
                <button class="btn-load-more">
                    <i class="fas fa-sync-alt"></i>
                    åŠ è½½æ›´å¤š
                </button>
            </div>
        </div>
    </section>

    <!-- å‘å¸ƒçº¦çƒæ¨¡æ€æ¡† -->
    <div id="createBookingModal" class="modal">
        <div class="modal-content large">
            <span class="close" onclick="closeModal('createBookingModal')">&times;</span>
            <h2>å‘å¸ƒçº¦çƒ</h2>
            <form class="booking-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="bookingTitle">çº¦çƒæ ‡é¢˜</label>
                        <input type="text" id="bookingTitle" placeholder="ç»™ä½ çš„çº¦çƒèµ·ä¸ªå¸å¼•äººçš„æ ‡é¢˜" required>
                    </div>
                    <div class="form-group">
                        <label for="bookingType">çº¦çƒç±»å‹</label>
                        <select id="bookingType" required>
                            <option value="">è¯·é€‰æ‹©</option>
                            <option value="casual">ä¼‘é—²å¨±ä¹</option>
                            <option value="training">æŠ€æœ¯è®­ç»ƒ</option>
                            <option value="competition">æ¯”èµ›åˆ‡ç£‹</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="bookingDescription">è¯¦ç»†æè¿°</label>
                    <textarea id="bookingDescription" rows="4" placeholder="æè¿°ä¸€ä¸‹ä½ çš„çº¦çƒéœ€æ±‚ã€æŠ€æœ¯æ°´å¹³è¦æ±‚ç­‰"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="bookingLocation">çƒåœºåœ°ç‚¹</label>
                        <select id="bookingLocation" required>
                            <option value="">è¯·é€‰æ‹©çƒåœº</option>
                            <option value="starlight">æ˜Ÿå…‰ä¹’ä¹“çƒé¦†</option>
                            <option value="champion">å† å†›è®­ç»ƒä¸­å¿ƒ</option>
                            <option value="community">ç¤¾åŒºæ´»åŠ¨ä¸­å¿ƒ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="bookingLevel">æŠ€æœ¯æ°´å¹³è¦æ±‚</label>
                        <select id="bookingLevel" required>
                            <option value="">è¯·é€‰æ‹©</option>
                            <option value="any">ä¸é™æ°´å¹³</option>
                            <option value="beginner">åˆå­¦è€…</option>
                            <option value="intermediate">ä¸­çº§</option>
                            <option value="advanced">é«˜çº§</option>
                            <option value="professional">ä¸“ä¸š</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="bookingDate">çº¦çƒæ—¥æœŸ</label>
                        <input type="date" id="bookingDate" required>
                    </div>
                    <div class="form-group">
                        <label for="bookingTime">æ—¶é—´æ®µ</label>
                        <select id="bookingTime" required>
                            <option value="">è¯·é€‰æ‹©æ—¶é—´</option>
                            <option value="09:00-11:00">09:00-11:00</option>
                            <option value="14:00-16:00">14:00-16:00</option>
                            <option value="19:00-21:00">19:00-21:00</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="maxPlayers">æœ€å¤§äººæ•°</label>
                        <select id="maxPlayers" required>
                            <option value="">è¯·é€‰æ‹©</option>
                            <option value="2">2äºº</option>
                            <option value="4">4äºº</option>
                            <option value="6">6äºº</option>
                            <option value="8">8äºº</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="costShare">è´¹ç”¨åˆ†æ‘Š</label>
                        <input type="number" id="costShare" placeholder="æ¯äººè´¹ç”¨ï¼ˆå…ƒï¼‰" min="0">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('createBookingModal')">å–æ¶ˆ</button>
                    <button type="submit" class="btn-primary">å‘å¸ƒçº¦çƒ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-user-info"></div>
                    <p>å…¨çƒä¹’ä¹“çƒçˆ±å¥½è€…çš„èšé›†åœ°ï¼Œåˆ†äº«æŠ€å·§ï¼Œç»“è¯†çƒå‹ï¼Œå…±åŒè¿›æ­¥</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-weixin"></i></a>
                        <a href="#"><i class="fab fa-weibo"></i></a>
                        <a href="#"><i class="fab fa-qq"></i></a>
                        <a href="#"><i class="fab fa-douyin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>ç¤¾åŒºå¯¼èˆª</h3>
                    <ul>
                        <li><a href="index.html">é¦–é¡µ</a></li>
                        <li><a href="booking.html">çº¦çƒä¸­å¿ƒ</a></li>
                        <li><a href="events.html">èµ›äº‹æ´»åŠ¨</a></li>
                        <li><a href="community.html">ç¤¾åŒºåŠ¨æ€</a></li>
                        <li><a href="#">æŠ€æœ¯äº¤æµ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>å¸®åŠ©æ”¯æŒ</h3>
                    <ul>
                        <li><a href="#">ä½¿ç”¨æŒ‡å—</a></li>
                        <li><a href="#">å¸¸è§é—®é¢˜</a></li>
                        <li><a href="#">è”ç³»å®¢æœ</a></li>
                        <li><a href="#">æ„è§åé¦ˆ</a></li>
                        <li><a href="#">å¼€å‘è€…API</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>è”ç³»ä½œè€…</h3>
                    <p><i class="fas fa-envelope"></i> xjy1369231377@outlook.com</p>
                    <p><i class="fab fa-weixin"></i> å¾®ä¿¡ï¼šqzwdxjy</p>
                    <p><i class="fab fa-qq"></i> QQï¼š1369231377</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 SpinMatch. ä¿ç•™æ‰€æœ‰æƒåˆ©. | <a href="#">éšç§æ”¿ç­–</a> | <a href="#">æœåŠ¡æ¡æ¬¾</a></p>
            </div>
        </div>
    </footer>

    <!-- ç™»å½•æ¨¡æ€æ¡† -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <form class="auth-form" id="loginForm">
                <h2>ç™»å½•è´¦æˆ·</h2>
                <div class="form-group">
                    <label for="loginEmail">é‚®ç®±</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">å¯†ç </label>
                    <input type="password" id="loginPassword" required>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="rememberMe">
                        <span class="checkmark"></span>
                        è®°ä½æˆ‘çš„ç™»å½•çŠ¶æ€
                    </label>
                </div>
                <button type="submit" class="btn-primary">ç™»å½•</button>
                <div class="auth-switch">
                    è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ<a href="#" onclick="switchModal('loginModal', 'registerModal')">ç«‹å³æ³¨å†Œ</a>
                </div>
            </form>
        </div>
    </div>

    <!-- æ³¨å†Œæ¨¡æ€æ¡† -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <form class="auth-form" id="registerForm">
                <h2>æ³¨å†Œè´¦æˆ·</h2>
                <div class="form-group">
                    <label for="registerName">å§“å</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">é‚®ç®±</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">å¯†ç </label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerLevel">æŠ€æœ¯æ°´å¹³</label>
                    <select id="registerLevel" required>
                        <!-- æŠ€æœ¯æ°´å¹³é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="registerLocation">æ‰€åœ¨åœ°åŒº</label>
                    <input type="text" id="registerLocation" placeholder="ä¾‹å¦‚ï¼šåŒ—äº¬å¸‚æœé˜³åŒº">
                </div>
                <button type="submit" class="btn-primary">æ³¨å†Œ</button>
                <div class="auth-switch">
                    å·²æœ‰è´¦æˆ·ï¼Ÿ<a href="#" onclick="switchModal('registerModal', 'loginModal')">ç«‹å³ç™»å½•</a>
                </div>
            </form>
        </div>
    </div>

    <!-- èŠå¤©çª—å£ -->
    <div id="chatModal" class="modal chat-modal">
        <div class="modal-content chat-content">
            <div class="chat-header">
                <div class="chat-user-info">
                    <img id="chatUserAvatar" src="" alt="ç”¨æˆ·å¤´åƒ" class="chat-avatar">
                    <div class="chat-user-details">
                        <h3 id="chatUserName">ç”¨æˆ·å</h3>
                        <span id="chatUserStatus" class="user-status online">åœ¨çº¿</span>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="chat-action-btn" onclick="minimizeChat()" title="æœ€å°åŒ–">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button class="chat-action-btn" onclick="closeChat()" title="å…³é—­">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message-date">ä»Šå¤©</div>
                <div class="message system-message">
                    <i class="fas fa-info-circle"></i>
                    <span>å¼€å§‹ä¸çƒå‹èŠå¤©ï¼Œè®¨è®ºçº¦çƒè¯¦æƒ…å§ï¼</span>
                </div>
            </div>
            
            <div class="chat-input-area">
                <div class="chat-input-container">
                    <button class="emoji-btn" onclick="toggleEmojiPicker()" title="è¡¨æƒ…">
                        <i class="fas fa-smile"></i>
                    </button>
                    <input type="text" id="chatInput" placeholder="è¾“å…¥æ¶ˆæ¯..." maxlength="500">
                    <button class="send-btn" onclick="sendMessage()" title="å‘é€">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="emoji-picker" id="emojiPicker" style="display: none;">
                    <div class="emoji-grid">
                        <span class="emoji" onclick="insertEmoji('ğŸ˜€')">ğŸ˜€</span>
                        <span class="emoji" onclick="insertEmoji('ğŸ˜Š')">ğŸ˜Š</span>
                        <span class="emoji" onclick="insertEmoji('ğŸ˜„')">ğŸ˜„</span>
                        <span class="emoji" onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
                        <span class="emoji" onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
                        <span class="emoji" onclick="insertEmoji('ğŸ“')">ğŸ“</span>
                        <span class="emoji" onclick="insertEmoji('ğŸ’ª')">ğŸ’ª</span>
                        <span class="emoji" onclick="insertEmoji('ğŸ¯')">ğŸ¯</span>
                        <span class="emoji" onclick="insertEmoji('ğŸ”¥')">ğŸ”¥</span>
                        <span class="emoji" onclick="insertEmoji('âš¡')">âš¡</span>
                        <span class="emoji" onclick="insertEmoji('ğŸ‰')">ğŸ‰</span>
                        <span class="emoji" onclick="insertEmoji('â¤ï¸')">â¤ï¸</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- çº¦çƒç¡®è®¤æ¨¡æ€æ¡† -->
    <div id="joinBookingModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('joinBookingModal')">&times;</span>
            <h2>ç¡®è®¤åŠ å…¥çº¦çƒ</h2>
            <div class="booking-confirm-info" id="bookingConfirmInfo">
                <!-- çº¦çƒä¿¡æ¯å°†åœ¨è¿™é‡ŒåŠ¨æ€å¡«å…… -->
            </div>
            <div class="confirm-form">
                <div class="form-group">
                    <label for="joinMessage">ç»™ç»„ç»‡è€…ç•™è¨€ï¼ˆå¯é€‰ï¼‰</label>
                    <textarea id="joinMessage" rows="3" placeholder="ä»‹ç»ä¸€ä¸‹è‡ªå·±ï¼Œæˆ–è€…è¯¢é—®ç›¸å…³é—®é¢˜..."></textarea>
                </div>
                <div class="form-group">
                    <label for="contactInfo">è”ç³»æ–¹å¼</label>
                    <input type="text" id="contactInfo" placeholder="æ‰‹æœºå·æˆ–å¾®ä¿¡å·ï¼Œæ–¹ä¾¿è”ç³»">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('joinBookingModal')">å–æ¶ˆ</button>
                    <button type="button" class="btn-primary" onclick="confirmJoinBooking()">ç¡®è®¤åŠ å…¥</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æµ®åŠ¨èŠå¤©æŒ‰é’® -->
    <div id="floatingChatBtn" class="floating-chat-btn" style="display: none;" onclick="restoreChat()">
        <i class="fas fa-comment"></i>
        <span class="chat-notification" id="chatNotification">1</span>
    </div>

    <!-- ç”¨æˆ·ä¸ªäººä¿¡æ¯æ¨¡æ€æ¡† -->
    <div id="userProfileModal" class="modal">
        <div class="modal-content user-profile-content">
            <span class="close" onclick="closeModal('userProfileModal')">&times;</span>
            <div class="profile-header">
                <div class="profile-avatar-section">
                    <img id="profileModalAvatar" src="" alt="ç”¨æˆ·å¤´åƒ" class="profile-modal-avatar">
                    <div class="profile-status">
                        <span class="status-indicator online"></span>
                        <span class="status-text">åœ¨çº¿</span>
                    </div>
                </div>
                <div class="profile-info">
                    <h2 id="profileModalName">ç”¨æˆ·å</h2>
                    <span id="profileModalLevel" class="user-level">æŠ€æœ¯æ°´å¹³</span>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="profileBookings">12</span>
                            <span class="stat-label">çº¦çƒæ¬¡æ•°</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="profileRating">4.8</span>
                            <span class="stat-label">è¯„åˆ†</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="profileExperience">2å¹´</span>
                            <span class="stat-label">çƒé¾„</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="profile-content">
                <div class="profile-section">
                    <h3><i class="fas fa-user"></i> ä¸ªäººç®€ä»‹</h3>
                    <p id="profileBio">è¿™ä½çƒå‹è¿˜æ²¡æœ‰æ·»åŠ ä¸ªäººç®€ä»‹...</p>
                </div>
                
                <div class="profile-section">
                    <h3><i class="fas fa-trophy"></i> æŠ€æœ¯ç‰¹é•¿</h3>
                    <div class="skills-tags" id="profileSkills">
                        <span class="skill-tag">åæ‰‹æ”»çƒ</span>
                        <span class="skill-tag">å‘çƒå˜åŒ–</span>
                        <span class="skill-tag">æˆ˜æœ¯é…åˆ</span>
                    </div>
                </div>
                
                <div class="profile-section">
                    <h3><i class="fas fa-calendar-alt"></i> æœ€è¿‘æ´»åŠ¨</h3>
                    <div class="recent-activities" id="profileActivities">
                        <div class="activity-item">
                            <i class="fas fa-handshake"></i>
                            <span>3å¤©å‰å‚åŠ äº†"å‘¨æœ«æŠ€æœ¯äº¤æµ"</span>
                        </div>
                        <div class="activity-item">
                            <i class="fas fa-trophy"></i>
                            <span>1å‘¨å‰è·å¾—"å‹è°Šèµ›å† å†›"ç§°å·</span>
                        </div>
                        <div class="activity-item">
                            <i class="fas fa-star"></i>
                            <span>2å‘¨å‰æ”¶åˆ°5æ˜Ÿå¥½è¯„</span>
                        </div>
                    </div>
                </div>
                
                <div class="profile-section">
                    <h3><i class="fas fa-map-marker-alt"></i> å¸¸å»çƒåœº</h3>
                    <div class="favorite-courts" id="profileCourts">
                        <div class="court-item">
                            <i class="fas fa-table-tennis"></i>
                            <span>æ˜Ÿå…‰ä¹’ä¹“çƒé¦†</span>
                        </div>
                        <div class="court-item">
                            <i class="fas fa-table-tennis"></i>
                            <span>å† å†›è®­ç»ƒä¸­å¿ƒ</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="profile-actions">
                <button class="btn-primary" onclick="closeModal('userProfileModal'); openChat(currentProfileUser.name, currentProfileUser.email, currentProfileUser.avatar)">
                    <i class="fas fa-comment"></i>
                    å‘èµ·èŠå¤©
                </button>
                <button class="btn-secondary" onclick="followUser()">
                    <i class="fas fa-user-plus"></i>
                    å…³æ³¨
                </button>
                <button class="btn-secondary" onclick="reportUser()">
                    <i class="fas fa-flag"></i>
                    ä¸¾æŠ¥
                </button>
            </div>
        </div>
    </div>

    <script src="../scripts/booking-data.js"></script>
    <script src="../scripts/booking.js"></script>
    
    <!-- è®¤è¯ç³»ç»ŸJavaScript -->
    <script>
        // ===== è®¤è¯ç³»ç»Ÿå®Œæ•´JavaScript ===== 
        
        // å…¨å±€å¸¸é‡å®šä¹‰
        const LEVEL_OPTIONS = [
            { value: 'beginner', label: 'åˆå­¦è€…' },
            { value: 'intermediate', label: 'ä¸­çº§' },
            { value: 'advanced', label: 'é«˜çº§' },
            { value: 'professional', label: 'ä¸“ä¸š' }
        ];

        // ç”ŸæˆæŠ€æœ¯æ°´å¹³é€‰é¡¹çš„è¾…åŠ©å‡½æ•°
        function generateLevelOptions(includeEmpty = false) {
            let options = '';
            if (includeEmpty) {
                options += '<option value="">è¯·é€‰æ‹©</option>';
            }
            LEVEL_OPTIONS.forEach(option => {
                options += `<option value="${option.value}">${option.label}</option>`;
            });
            return options;
        }

        // æ¨¡æ€æ¡†ç®¡ç†å‡½æ•°
        window.openModal = function(modalId) {
            console.log('ğŸ”¥ å°è¯•æ‰“å¼€æ¨¡æ€æ¡†:', modalId);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('show');
                modal.style.display = 'flex';
                modal.style.zIndex = '10000';
                document.body.style.overflow = 'hidden';
                console.log('âœ… æ¨¡æ€æ¡†å·²æ‰“å¼€:', modalId);
            } else {
                console.error('âŒ æ‰¾ä¸åˆ°æ¨¡æ€æ¡†:', modalId);
            }
        };
        
        window.closeModal = function(modalId) {
            console.log('ğŸ”¥ å°è¯•å…³é—­æ¨¡æ€æ¡†:', modalId);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('show');
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                console.log('âœ… æ¨¡æ€æ¡†å·²å…³é—­:', modalId);
            } else {
                console.error('âŒ æ‰¾ä¸åˆ°æ¨¡æ€æ¡†:', modalId);
            }
        };
        
        window.switchModal = function(from, to) {
            console.log('ğŸ”¥ åˆ‡æ¢æ¨¡æ€æ¡†:', from, 'â†’', to);
            window.closeModal(from);
            window.openModal(to);
        };

        // æ˜¾ç¤ºé€šçŸ¥æ¶ˆæ¯
        function showNotification(message, type = 'info', duration = 5000) {
            if (window.authModule && typeof window.authModule.showNotification === 'function') {
                window.authModule.showNotification(message, type, duration);
                return;
            }
            console.log(`é€šçŸ¥: ${message} (${type})`);
        }
        
        // æ›´æ–°ç”¨æˆ·ç•Œé¢
        function updateUserInterface(userData) {
            console.log('ğŸ”„ æ›´æ–°ç”¨æˆ·ç•Œé¢:', userData);
            
            // éšè—ç™»å½•æ³¨å†ŒæŒ‰é’®ï¼Œæ˜¾ç¤ºç”¨æˆ·èœå•
            const navAuth = document.querySelector('.nav-auth');
            if (navAuth) {
                navAuth.innerHTML = `
                    <div class="user-menu">
                        <span class="username">æ¬¢è¿ï¼Œ${userData.name}</span>
                        <button class="btn-logout" onclick="handleLogout()">é€€å‡º</button>
                    </div>
                `;
            }
        }
        
        // è·å–æŠ€æœ¯æ°´å¹³æ–‡æœ¬
        function getLevelText(level) {
            const levels = {
                'beginner': 'åˆå­¦è€…',
                'intermediate': 'ä¸­çº§',
                'advanced': 'é«˜çº§',
                'professional': 'ä¸“ä¸š'
            };
            return levels[level] || 'åˆå­¦è€…';
        }
        
        // å¤„ç†é€€å‡ºç™»å½•
        function handleLogout() {
            console.log('ğŸ‘‹ ç”¨æˆ·é€€å‡ºç™»å½•');
            
            // æ¸…é™¤å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯
            localStorage.removeItem('spinmatch_user');
            localStorage.removeItem('spinmatch_logged_in');
            sessionStorage.removeItem('spinmatch_user');
            sessionStorage.removeItem('spinmatch_logged_in');
            
            // æ˜¾ç¤ºé€€å‡ºæ¶ˆæ¯
            showNotification('å·²æˆåŠŸé€€å‡ºç™»å½•', 'info');
            
            // æ¢å¤ç™»å½•æ³¨å†ŒæŒ‰é’®
            const navAuth = document.querySelector('.nav-auth');
            if (navAuth) {
                navAuth.innerHTML = `
                    <button class="btn-login" onclick="openModal('loginModal')">ç™»å½•</button>
                    <button class="btn-register" onclick="openModal('registerModal')">æ³¨å†Œ</button>
                `;
            }
        }
        
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const user = localStorage.getItem('spinmatch_user') || sessionStorage.getItem('spinmatch_user');
            const isLoggedIn = localStorage.getItem('spinmatch_logged_in') || sessionStorage.getItem('spinmatch_logged_in');
            
            if (user && isLoggedIn === 'true') {
                try {
                    const userData = JSON.parse(user);
                    console.log('ğŸ”„ å‘ç°å·²ç™»å½•ç”¨æˆ·:', userData);
                    updateUserInterface(userData);
                } catch (error) {
                    console.error('âŒ ç”¨æˆ·æ•°æ®è§£æå¤±è´¥:', error);
                    localStorage.removeItem('spinmatch_user');
                    localStorage.removeItem('spinmatch_logged_in');
                    sessionStorage.removeItem('spinmatch_user');
                    sessionStorage.removeItem('spinmatch_logged_in');
                }
            }
        }

        // ç»Ÿä¸€åˆå§‹åŒ–æ‰€æœ‰è¡¨å•é€‰é¡¹
        function initializeAllForms() {
            const registerLevelSelect = document.getElementById('registerLevel');
            if (registerLevelSelect) {
                registerLevelSelect.innerHTML = generateLevelOptions(true);
            }
        }
        
        // ç¡®ä¿è®¤è¯ç³»ç»Ÿæ­£ç¡®åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ”§ ç¡®ä¿è®¤è¯ç³»ç»Ÿå·²æ­£ç¡®åˆå§‹åŒ–');
            
            // æ·»åŠ æ¨¡æ€æ¡†èƒŒæ™¯ç‚¹å‡»å…³é—­åŠŸèƒ½
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal') && e.target.classList.contains('show')) {
                    console.log('ğŸ¯ æ¨¡æ€æ¡†èƒŒæ™¯è¢«ç‚¹å‡»ï¼Œå…³é—­æ¨¡æ€æ¡†');
                    const modalId = e.target.id;
                    window.closeModal(modalId);
                }
            });
            
            // æ·»åŠ ESCé”®å…³é—­æ¨¡æ€æ¡†åŠŸèƒ½
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const openModal = document.querySelector('.modal.show');
                    if (openModal) {
                        console.log('ğŸ¯ ESCé”®è¢«æŒ‰ä¸‹ï¼Œå…³é—­æ¨¡æ€æ¡†');
                        window.closeModal(openModal.id);
                    }
                }
            });
            
            // åˆå§‹åŒ–æ‰€æœ‰è¡¨å•é€‰é¡¹
            initializeAllForms();
            
            // æ£€æŸ¥æ˜¯å¦å·²ç»ç™»å½•
            checkLoginStatus();
            
            // æ£€æŸ¥è®¤è¯æŒ‰é’®æ˜¯å¦å¯ç‚¹å‡»
            const loginBtn = document.querySelector('.btn-login');
            const registerBtn = document.querySelector('.btn-register');
            
            console.log('ğŸ” æ£€æŸ¥æŒ‰é’®å…ƒç´ :');
            console.log('- ç™»å½•æŒ‰é’®:', loginBtn ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨');
            console.log('- æ³¨å†ŒæŒ‰é’®:', registerBtn ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨');
            
            if (loginBtn) {
                loginBtn.addEventListener('click', function(e) {
                    console.log('ğŸ¯ ç™»å½•æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼', e);
                    e.preventDefault();
                    window.openModal('loginModal');
                });
            }
            
            if (registerBtn) {
                registerBtn.addEventListener('click', function(e) {
                    console.log('ğŸ¯ æ³¨å†ŒæŒ‰é’®è¢«ç‚¹å‡»äº†ï¼', e);
                    e.preventDefault();
                    window.openModal('registerModal');
                });
            }
        });
    </script>
</body>
</html> 
