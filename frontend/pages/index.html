<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpinMatch - ä¹’ä¹“çƒçˆ±å¥½è€…ç¤¾åŒº</title>
    
    <!-- ç»Ÿä¸€è®¤è¯ç³»ç»ŸåŠ è½½å™¨ -->
    <script src="../scripts/unified-auth-loader.js"></script>
    
    <!-- è®¤è¯æ¨¡å— -->
    <script src="../scripts/auth-module.js"></script>
    
    <!-- é˜²é—ªç™½çš„å…³é”®CSS - å¿…é¡»åœ¨æœ€å‰é¢ -->
    <style>
        html { background-color: #1a1a1a !important; }
        body { background-color: #1a1a1a !important; opacity: 1 !important; }
    </style>
    
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/page-transitions.css">
    <link rel="stylesheet" href="../styles/auth-styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        .hero-buttons {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
            max-width: 400px;
            margin: 0 auto;
        }

        .hero-buttons .btn-primary,
        .hero-buttons .btn-secondary {
            padding: 10px 20px !important;
            font-size: 0.95rem !important;
            font-weight: 500 !important;
            border-radius: 20px !important;
            border: none !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            display: flex !important;
            align-items: center !important;
            gap: 0.4rem !important;
            text-decoration: none !important;
            width: calc(50% - 0.5rem) !important;
            justify-content: center !important;
            box-sizing: border-box !important;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3) !important;
            backdrop-filter: blur(10px) !important;
        }

        .hero-buttons .btn-primary {
            background: #DC143C !important;
            color: white !important;
            border: 2px solid #DC143C !important;
        }

        .hero-buttons .btn-primary:hover {
            background: #B91C3C !important;
            border-color: #B91C3C !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 5px 15px rgba(220, 20, 60, 0.3) !important;
        }

        .hero-buttons .btn-secondary {
            background: transparent !important;
            color: white !important;
            border: 2px solid white !important;
        }

        .hero-buttons .btn-secondary:hover {
            background: white !important;
            color: #DC143C !important;
            transform: translateY(-2px) !important;
        }

        /* ç¡®ä¿å¯¼èˆªæ åœ¨æœ€ä¸Šå±‚ï¼Œä½†å¢åŠ é€æ˜åº¦ */
        .navbar {
            position: fixed !important;
            top: 0 !important;
            width: 100% !important;
            z-index: 1000 !important;
            background: rgba(0, 0, 0, 0.3) !important;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            padding: 1rem 0 !important;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        /* å¯¼èˆªå®¹å™¨å±…ä¸­å¸ƒå±€ */
        .nav-container {
            display: flex !important;
            justify-content: space-between !important;
            align-items: center !important;
            max-width: 1200px !important;
            margin: 0 auto !important;
            padding: 0 20px !important;
            position: relative !important;
            height: auto !important;
        }

        /* å¯¼èˆªèœå•å±…ä¸­ */
        .nav-menu {
            display: flex !important;
            list-style: none !important;
            gap: 3rem !important;
            margin: 0 !important;
            padding: 0 !important;
            position: absolute !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            align-items: center !important;
        }

        .nav-menu li {
            list-style: none !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        /* ç™»å½•æ³¨å†ŒæŒ‰é’®æ”¾åœ¨å³ä¾§ */
        .nav-auth {
            display: flex !important;
            gap: 1rem !important;
            margin-left: auto !important;
            z-index: 10 !important;
            align-items: center !important;
        }

        /* å¯¼èˆªæ æ‚¬åœæ•ˆæœ */
        .navbar:hover {
            background: rgba(0, 0, 0, 0.4) !important;
        }

        /* å¯¼èˆªé“¾æ¥æ ·å¼ç®€åŒ– */
        .nav-menu a {
            color: white !important;
            font-weight: 500 !important;
            transition: all 0.3s ease !important;
            position: relative !important;
            padding: 8px 16px !important;
            border-radius: 15px !important;
            text-decoration: none !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            height: auto !important;
            white-space: nowrap !important;
        }

        .nav-menu a:hover {
            color: #FFD700 !important;
            background: rgba(255, 215, 0, 0.1) !important;
            transform: translateY(-2px) !important;
        }

        .nav-menu a.active {
            color: #DC143C !important;
            background: rgba(220, 20, 60, 0.1) !important;
        }

        /* æ·»åŠ æ‚¬åœä¸‹åˆ’çº¿æ•ˆæœ */
        .nav-menu a::after {
            content: '' !important;
            position: absolute !important;
            bottom: -5px !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            width: 0 !important;
            height: 2px !important;
            background: #FFD700 !important;
            transition: width 0.3s ease !important;
        }

        .nav-menu a:hover::after {
            width: 80% !important;
        }

        .nav-menu a.active::after {
            width: 80% !important;
            background: #DC143C !important;
        }

        /* ç™»å½•æ³¨å†ŒæŒ‰é’®æ ·å¼ç®€åŒ– */
        .btn-login, .btn-register {
            padding: 8px 18px !important;
            border-radius: 20px !important;
            font-weight: 600 !important;
            transition: all 0.3s ease !important;
            border: 2px solid transparent !important;
            font-size: 14px !important;
            text-shadow: none !important;
            cursor: pointer !important;
            text-decoration: none !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            white-space: nowrap !important;
            pointer-events: auto !important;
            position: relative !important;
            z-index: 1001 !important;
        }

        .btn-login {
            background: linear-gradient(45deg, #FF6B35, #DC143C) !important;
            color: white !important;
            box-shadow: 0 3px 12px rgba(220, 20, 60, 0.4) !important;
            border: 2px solid rgba(255, 255, 255, 0.2) !important;
        }

        .btn-login:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 20px rgba(220, 20, 60, 0.6) !important;
            border: 2px solid rgba(255, 255, 255, 0.4) !important;
        }

        .btn-register {
            background: linear-gradient(45deg, #FFD700, #FFA500) !important;
            color: #1a1a1a !important;
            box-shadow: 0 3px 12px rgba(255, 215, 0, 0.4) !important;
            border: 2px solid rgba(255, 255, 255, 0.2) !important;
            font-weight: 700 !important;
        }

        .btn-register:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6) !important;
            border: 2px solid rgba(255, 255, 255, 0.4) !important;
        }

        /* æ±‰å ¡èœå•æŒ‰é’®å¢å¼º */
        .hamburger {
            display: none !important;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .hero-content {
                max-width: 95%;
                padding: 0 15px;
            }
            
            .hero-text h1 {
                font-size: 3rem;
                letter-spacing: 2px;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
                gap: 0.8rem;
                max-width: 250px;
            }
            
            .hero-buttons .btn-primary,
            .hero-buttons .btn-secondary {
                width: 100% !important;
                padding: 10px 18px !important;
                font-size: 0.9rem !important;
                min-width: auto !important;
            }
            
            .nav-container {
                justify-content: space-between !important;
                gap: 1rem !important;
            }
            
            .nav-menu {
                display: none !important;
                position: static !important;
                transform: none !important;
            }
            
            .hamburger {
                display: block !important;
            }
            
            .nav-auth {
                gap: 0.5rem !important;
                margin-left: 0 !important;
            }
            
            .btn-login, .btn-register {
                padding: 6px 12px !important;
                font-size: 12px !important;
            }
        }

        /* ä¿®å¤heroåŒºåŸŸå¸ƒå±€ */
        .hero-content {
            display: flex !important;
            flex-direction: column !important;
            justify-content: center !important;
            align-items: center !important;
            max-width: 1200px !important;
            margin: 0 auto !important;
            padding: 0 20px !important;
            z-index: 10 !important;
            position: relative !important;
            min-height: 100vh !important;
            text-align: center !important;
        }

        /* ç¡®ä¿è§†é¢‘èƒŒæ™¯æ­£ç¡®æ˜¾ç¤º */
        .hero {
            position: relative !important;
            overflow: hidden !important;
        }

        /* å‡å°‘è¦†ç›–å±‚çš„ä¸é€æ˜åº¦ï¼Œè®©è§†é¢‘æ›´æ¸…æ™° */
        .hero::before {
            display: none !important; /* å®Œå…¨ç§»é™¤è¦†ç›–å±‚ */
        }

        /* æ·»åŠ å¤‡ç”¨èƒŒæ™¯ï¼Œå½“è§†é¢‘åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤º */
        .hero {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%) !important;
        }

        .hero-video-background {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
            z-index: 0 !important;
            opacity: 1 !important;
            visibility: visible !important;
        }

        /* å¢å¼ºæ–‡å­—å¯¹æ¯”åº¦ */
        .hero-text p {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.2rem;
            color: #FFFFFF;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            max-width: 600px;
            line-height: 1.6;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-text h1 {
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 3.5rem;
            font-weight: 700;
            color: #FFFFFF !important;
            background: none !important;
            -webkit-background-clip: unset !important;
            -webkit-text-fill-color: unset !important;
            background-clip: unset !important;
            letter-spacing: 1px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.9), 0 0 20px rgba(0, 0, 0, 0.5) !important;
        }

        /* Logoå¢å¼ºæ•ˆæœ */
        .nav-logo {
            transition: all 0.3s ease !important;
        }

        .nav-logo:hover {
            transform: scale(1.1) !important;
            filter: drop-shadow(0 0 10px rgba(255, 107, 53, 0.6)) !important;
        }

        .nav-logo span {
            color: white !important;
            font-weight: 700 !important;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3) !important;
        }

        /* å¢å¼ºæŒ‰é’®çš„å¯è§æ€§ - ç§»é™¤ä¹‹å‰çš„æ ·å¼è¦†ç›– */

        /* ===== æ¨¡æ€æ¡†æ ·å¼ ===== */
        .modal {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: rgba(0, 0, 0, 0.8) !important;
            display: none !important;
            justify-content: center !important;
            align-items: center !important;
            z-index: 10000 !important;
        }
        
        .modal.show { display: flex !important; }

        /* ===== é€šç”¨æ¨¡æ€æ¡†å†…å®¹æ ·å¼ ===== */
        .modal-content {
            background: white !important;
            border-radius: 15px !important;
            padding: 2rem !important;
            max-width: 400px !important;
            width: 90% !important;
            max-height: 90vh !important;
            overflow-y: auto !important;
            position: relative !important;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;
        }

        .modal-content .close {
            position: absolute !important;
            right: 20px !important;
            top: 20px !important;
            width: 30px !important;
            height: 30px !important;
            border-radius: 50% !important;
            background: rgba(220, 20, 60, 0.1) !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 18px !important;
            color: #DC143C !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            border: 2px solid #DC143C !important;
            font-weight: bold !important;
        }

        .modal-content .close:hover {
            background: #DC143C !important;
            color: white !important;
            transform: scale(1.1) !important;
        }

        /* ===== è®¤è¯è¡¨å•æ ·å¼ ===== */
        .auth-form {
            width: 100% !important;
        }

        .auth-form h2 {
            text-align: center !important;
            margin-bottom: 1.5rem !important;
            color: #333 !important;
            font-size: 1.5rem !important;
            font-weight: 600 !important;
        }

        .auth-form .form-group {
            margin-bottom: 1rem !important;
        }

        .auth-form .form-group label {
            display: block !important;
            margin-bottom: 0.5rem !important;
            font-weight: 500 !important;
            color: #374151 !important;
        }

        .auth-form .form-group input,
        .auth-form .form-group select {
            width: 100% !important;
            padding: 12px 16px !important;
            border: 2px solid #e5e7eb !important;
            border-radius: 8px !important;
            font-size: 16px !important;
            transition: all 0.3s ease !important;
            background: #fff !important;
            box-sizing: border-box !important;
        }

        .auth-form .form-group input:focus,
        .auth-form .form-group select:focus {
            outline: none !important;
            border-color: #DC143C !important;
            box-shadow: 0 0 0 3px rgba(220, 20, 60, 0.1) !important;
        }

        .auth-form .checkbox-label {
            display: flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
            cursor: pointer !important;
        }

        .auth-form .btn-primary {
            width: 100% !important;
            padding: 12px !important;
            background: linear-gradient(135deg, #DC143C, #B91C3C) !important;
            color: white !important;
            border: none !important;
            border-radius: 8px !important;
            font-size: 16px !important;
            font-weight: 600 !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            margin-top: 1rem !important;
        }

        .auth-form .btn-primary:hover {
            background: linear-gradient(135deg, #B91C3C, #A01B3D) !important;
            transform: translateY(-1px) !important;
            box-shadow: 0 4px 12px rgba(220, 20, 60, 0.3) !important;
        }

        .auth-form .auth-switch {
            text-align: center !important;
            margin-top: 1rem !important;
            color: #666 !important;
            font-size: 14px !important;
        }

        .auth-form .auth-switch a {
            color: #DC143C !important;
            text-decoration: none !important;
            font-weight: 500 !important;
        }

        .auth-form .auth-switch a:hover {
            text-decoration: underline !important;
        }

        /* ===== ç”¨æˆ·èœå•æ ·å¼ ===== */
        .user-menu {
            display: flex !important;
            align-items: center !important;
            gap: 1rem !important;
        }
        
        .username {
            color: white !important;
            font-weight: 500 !important;
            font-size: 14px !important;
        }
        
        .btn-logout {
            padding: 8px 18px !important;
            border-radius: 20px !important;
            font-weight: 600 !important;
            transition: all 0.3s ease !important;
            border: 2px solid #ff6b6b !important;
            font-size: 14px !important;
            cursor: pointer !important;
            text-decoration: none !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            white-space: nowrap !important;
            background: rgba(255, 107, 107, 0.1) !important;
            color: #ff6b6b !important;
        }
        
        .btn-logout:hover {
            background: #ff6b6b !important;
            color: white !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3) !important;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <ul class="nav-menu">
                <li><a href="#home" class="active">é¦–é¡µ</a></li>
                <li><a href="booking.html">çº¦çƒ</a></li>
                <li><a href="events.html">èµ›äº‹</a></li>
                <li><a href="community.html">ç¤¾åŒº</a></li>
                <li><a href="news.html">èµ„è®¯</a></li>
                <li><a href="profile.html">æˆ‘çš„</a></li>
            </ul>
            <div class="nav-auth">
                <button class="btn-login" onclick="openModal('loginModal')">ç™»å½•</button>
                <button class="btn-register" onclick="openModal('registerModal')">æ³¨å†Œ</button>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- è‹±é›„åŒºåŸŸ -->
    <section id="home" class="hero">
        <div class="hero-content">
            <div class="hero-text">
                <h1>SpinMatch ä¹’ä¹“çƒç¤¾åŒº</h1>
                <p>è¿æ¥å…¨çƒä¹’ä¹“çƒçˆ±å¥½è€…ï¼Œåˆ†äº«æŠ€å·§ï¼Œçº¦çƒåˆ‡ç£‹ï¼Œå‚ä¸èµ›äº‹</p>
                <div class="hero-buttons">
                    <button class="btn-primary" onclick="window.location.href='booking.html'">
                        <i class="fas fa-handshake"></i>
                        ç«‹å³çº¦çƒ
                    </button>
                    <button class="btn-secondary" onclick="openModal('registerModal')">
                        <i class="fas fa-user-plus"></i>
                        åŠ å…¥ç¤¾åŒº
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <div class="footer-user-info"></div>
            <div class="footer-content">
                <div class="footer-section">
                    <p>å…¨çƒä¹’ä¹“çƒçˆ±å¥½è€…çš„èšé›†åœ°ï¼Œåˆ†äº«æŠ€å·§ï¼Œç»“è¯†çƒå‹ï¼Œå…±åŒè¿›æ­¥</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-weixin"></i></a>
                        <a href="#"><i class="fab fa-weibo"></i></a>
                        <a href="#"><i class="fab fa-qq"></i></a>
                        <a href="#"><i class="fab fa-douyin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>ç¤¾åŒºå¯¼èˆª</h3>
                    <ul>
                        <li><a href="index.html">é¦–é¡µ</a></li>
                        <li><a href="booking.html">çº¦çƒ</a></li>
                        <li><a href="events.html">èµ›äº‹</a></li>
                        <li><a href="community.html">ç¤¾åŒº</a></li>
                        <li><a href="profile.html">æˆ‘çš„</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>å¸®åŠ©æ”¯æŒ</h3>
                    <ul>
                        <li><a href="#">ä½¿ç”¨æŒ‡å—</a></li>
                        <li><a href="#">å¸¸è§é—®é¢˜</a></li>
                        <li><a href="#">è”ç³»å®¢æœ</a></li>
                        <li><a href="#">æ„è§åé¦ˆ</a></li>
                        <li><a href="#">å¼€å‘è€…API</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>è”ç³»ä½œè€…</h3>
                    <p><i class="fas fa-envelope"></i> xjy1369231377@outlook.com</p>
                    <p><i class="fab fa-weixin"></i> å¾®ä¿¡ï¼šqzwdxjy</p>
                    <p><i class="fab fa-qq"></i> QQï¼š1369231377</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 SpinMatch. ä¿ç•™æ‰€æœ‰æƒåˆ©. | <a href="#">éšç§æ”¿ç­–</a> | <a href="#">æœåŠ¡æ¡æ¬¾</a></p>
            </div>
        </div>
    </footer>

    <!-- ç™»å½•æ¨¡æ€æ¡† -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <form class="auth-form" id="loginForm">
                <h2>ç™»å½•è´¦æˆ·</h2>
                <div class="form-group">
                    <label for="loginEmail">é‚®ç®±</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">å¯†ç </label>
                    <input type="password" id="loginPassword" required>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="rememberMe">
                        <span class="checkmark"></span>
                        è®°ä½æˆ‘çš„ç™»å½•çŠ¶æ€
                    </label>
                </div>
                <button type="submit" class="btn-primary">ç™»å½•</button>
                <div class="auth-switch">
                    è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ<a href="#" onclick="switchModal('loginModal', 'registerModal')">ç«‹å³æ³¨å†Œ</a>
                </div>
            </form>
        </div>
    </div>

    <!-- æ³¨å†Œæ¨¡æ€æ¡† -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <form class="auth-form" id="registerForm">
                <h2>æ³¨å†Œè´¦æˆ·</h2>
                <div class="form-group">
                    <label for="registerName">å§“å</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">é‚®ç®±</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">å¯†ç </label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerLevel">æŠ€æœ¯æ°´å¹³</label>
                    <select id="registerLevel" required>
                        <!-- æŠ€æœ¯æ°´å¹³é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="registerLocation">æ‰€åœ¨åœ°åŒº</label>
                    <input type="text" id="registerLocation" placeholder="ä¾‹å¦‚ï¼šåŒ—äº¬å¸‚æœé˜³åŒº">
                </div>
                <button type="submit" class="btn-primary">æ³¨å†Œ</button>
                <div class="auth-switch">
                    å·²æœ‰è´¦æˆ·ï¼Ÿ<a href="#" onclick="switchModal('registerModal', 'loginModal')">ç«‹å³ç™»å½•</a>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ç®€åŒ–çš„è§†é¢‘èƒŒæ™¯ç®¡ç†å™¨ - ç¡®ä¿ç¨³å®šåˆ‡æ¢
        class VideoBackgroundManager {
            constructor() {
                this.videos = [];
                
                // åªæ·»åŠ ç¡®å®å­˜åœ¨çš„è§†é¢‘æ–‡ä»¶
                const existingVideos = [
                    1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29,
                    30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49,
                    50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69,
                    70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89,
                    90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109,
                    110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129,
                    130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149,
                    150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169,
                    170, 171, 172, 173, 174, 175, 176, 177, 178
                ];
                
                // æ·»åŠ å­˜åœ¨çš„SpinMatchè§†é¢‘
                existingVideos.forEach(i => {
                    this.videos.push(`../assets/SpinMatch (${i}).mp4`);
                });
                
                // æ·»åŠ ç‰¹æ®Šè§†é¢‘ï¼ˆç¡®è®¤å­˜åœ¨ï¼‰
                this.videos.push('../assets/æœ€å¼ºä¹’ä¹“ç²¾å½©çƒåˆè¾‘ - 2.mp4');
                
                console.log(`å·²åŠ è½½ ${this.videos.length} ä¸ªè§†é¢‘æ–‡ä»¶`);
                
                this.currentVideoIndex = 0;
                this.videoElement = null;
                this.heroSection = null;
                this.soundEnabled = false;
                this.loadAttempts = 0;
                this.maxAttempts = 3; // å‡å°‘é‡è¯•æ¬¡æ•°
                this.isLoading = false;
                this.hasShownError = false; // é˜²æ­¢é‡å¤æ˜¾ç¤ºé”™è¯¯
                
                // è·Ÿè¸ªå·²æ’­æ”¾çš„è§†é¢‘
                this.playedVideos = new Set();
                this.availableVideos = [...Array(this.videos.length).keys()];
                this.shuffleArray(this.availableVideos);
                this.currentPlaylistIndex = 0;
                
                this.init();
            }

            // éšæœºæ‰“ä¹±æ•°ç»„
            shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            // é‡æ–°ç”Ÿæˆæ’­æ”¾åˆ—è¡¨
            regeneratePlaylist() {
                console.log('æ‰€æœ‰è§†é¢‘å·²æ’­æ”¾å®Œæ¯•ï¼Œé‡æ–°ç”Ÿæˆæ’­æ”¾åˆ—è¡¨');
                this.playedVideos.clear();
                this.availableVideos = [...Array(this.videos.length).keys()];
                this.shuffleArray(this.availableVideos);
                this.currentPlaylistIndex = 0;
            }

            // è·å–ä¸‹ä¸€ä¸ªæœªæ’­æ”¾çš„è§†é¢‘ç´¢å¼•
            getNextVideoIndex() {
                if (this.currentPlaylistIndex >= this.availableVideos.length) {
                    this.regeneratePlaylist();
                }
                
                const videoIndex = this.availableVideos[this.currentPlaylistIndex];
                this.currentPlaylistIndex++;
                this.playedVideos.add(videoIndex);
                
                console.log(`é€‰æ‹©è§†é¢‘ ${videoIndex + 1}/${this.videos.length}ï¼Œå·²æ’­æ”¾ ${this.playedVideos.size} ä¸ªè§†é¢‘`);
                
                return videoIndex;
            }

            init() {
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', () => this.setupVideoBackground());
                } else {
                    this.setupVideoBackground();
                }
            }

            setupVideoBackground() {
                console.log('è®¾ç½®è§†é¢‘èƒŒæ™¯...');
                this.heroSection = document.querySelector('.hero');
                if (!this.heroSection) {
                    console.error('Hero section not found');
                    return;
                }

                this.createVideoElement();
                this.loadFirstVideo();
                this.setupMouseDetection();
            }

            createVideoElement() {
                console.log('åˆ›å»ºè§†é¢‘å…ƒç´ ...');
                this.videoElement = document.createElement('video');
                this.videoElement.className = 'hero-video-background';
                this.videoElement.autoplay = true;
                this.videoElement.muted = true;
                this.videoElement.loop = false;
                this.videoElement.playsInline = true;
                this.videoElement.preload = 'auto';
                
                // è®¾ç½®è§†é¢‘æ ·å¼
                this.videoElement.style.cssText = `
                    position: absolute !important;
                    top: 0 !important;
                    left: 0 !important;
                    width: 100% !important;
                    height: 100% !important;
                    object-fit: cover !important;
                    z-index: 0 !important;
                    opacity: 1 !important;
                    visibility: visible !important;
                    display: block !important;
                `;
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
                this.videoElement.addEventListener('loadstart', () => {
                    console.log('è§†é¢‘å¼€å§‹åŠ è½½');
                    this.isLoading = true;
                });
                
                this.videoElement.addEventListener('loadeddata', () => {
                    console.log('è§†é¢‘æ•°æ®åŠ è½½å®Œæˆ');
                    this.isLoading = false;
                    this.loadAttempts = 0;
                    this.hasShownError = false; // é‡ç½®é”™è¯¯çŠ¶æ€
                });
                
                this.videoElement.addEventListener('canplay', () => {
                    console.log('è§†é¢‘å¯ä»¥æ’­æ”¾');
                });
                
                this.videoElement.addEventListener('playing', () => {
                    console.log('è§†é¢‘æ­£åœ¨æ’­æ”¾');
                });
                
                this.videoElement.addEventListener('ended', () => {
                    console.log('è§†é¢‘æ’­æ”¾å®Œæ¯•ï¼Œå‡†å¤‡åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª');
                    // çŸ­æš‚å»¶è¿Ÿååˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªè§†é¢‘
                    setTimeout(() => {
                        this.loadNextVideo();
                    }, 200);
                });
                
                this.videoElement.addEventListener('error', (e) => {
                    console.error('è§†é¢‘åŠ è½½é”™è¯¯:', e);
                    if (this.videoElement.error) {
                        console.error('é”™è¯¯ä»£ç :', this.videoElement.error.code);
                        console.error('é”™è¯¯ä¿¡æ¯:', this.videoElement.error.message);
                    }
                    this.handleVideoError();
                });

                this.videoElement.addEventListener('stalled', () => {
                    console.warn('è§†é¢‘åŠ è½½åœæ»');
                    if (!this.isLoading) {
                        setTimeout(() => {
                            if (this.videoElement.readyState < 3) { // HAVE_FUTURE_DATA
                                console.warn('è§†é¢‘åœæ»å¤ªä¹…ï¼Œå°è¯•åˆ‡æ¢');
                                this.handleVideoError();
                            }
                        }, 5000);
                    }
                });

                this.videoElement.addEventListener('waiting', () => {
                    console.warn('è§†é¢‘ç¼“å†²ä¸­');
                });

                // æ·»åŠ åˆ°é¡µé¢
                this.heroSection.insertBefore(this.videoElement, this.heroSection.firstChild);
                console.log('è§†é¢‘å…ƒç´ å·²æ·»åŠ åˆ°é¡µé¢');
            }

            loadFirstVideo() {
                this.currentVideoIndex = this.getNextVideoIndex();
                this.loadCurrentVideo();
            }

            loadNextVideo() {
                if (this.isLoading) {
                    console.log('æ­£åœ¨åŠ è½½ä¸­ï¼Œè·³è¿‡åˆ‡æ¢');
                    return;
                }
                
                this.currentVideoIndex = this.getNextVideoIndex();
                this.loadCurrentVideo();
            }

            loadCurrentVideo() {
                if (!this.videoElement || !this.videos[this.currentVideoIndex]) {
                    console.error('è§†é¢‘å…ƒç´ æˆ–è§†é¢‘è·¯å¾„ä¸å¯ç”¨');
                    this.handleVideoError();
                    return;
                }

                const videoPath = this.videos[this.currentVideoIndex];
                console.log('åŠ è½½è§†é¢‘:', videoPath);
                
                // æš‚åœå½“å‰è§†é¢‘
                this.videoElement.pause();
                
                // è®¾ç½®æ–°çš„è§†é¢‘æº
                this.videoElement.src = videoPath;
                this.videoElement.currentTime = 0;
                this.videoElement.muted = !this.soundEnabled;
                
                // å°è¯•æ’­æ”¾è§†é¢‘
                const playPromise = this.videoElement.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log(`è§†é¢‘æ’­æ”¾æˆåŠŸï¼ˆ${this.soundEnabled ? 'æœ‰å£°éŸ³' : 'é™éŸ³'}ï¼‰`);
                    }).catch(error => {
                        console.error('è§†é¢‘æ’­æ”¾å¤±è´¥:', error);
                        this.handleVideoError();
                    });
                }
            }

            handleVideoError() {
                this.loadAttempts++;
                console.log(`è§†é¢‘åŠ è½½å¤±è´¥ï¼Œå°è¯•æ¬¡æ•°: ${this.loadAttempts}/${this.maxAttempts}`);
                
                if (this.loadAttempts < this.maxAttempts) {
                    // å°è¯•åŠ è½½ä¸‹ä¸€ä¸ªè§†é¢‘
                    setTimeout(() => {
                        this.loadNextVideo();
                    }, 1000);
                } else {
                    console.error('å¤šæ¬¡å°è¯•å¤±è´¥');
                    if (!this.hasShownError) {
                        this.hasShownError = true;
                        this.showErrorMessage();
                    }
                    // é‡ç½®å°è¯•æ¬¡æ•°ï¼Œç»§ç»­å°è¯•å…¶ä»–è§†é¢‘
                    this.loadAttempts = 0;
                    setTimeout(() => {
                        this.loadNextVideo();
                    }, 3000);
                }
            }

            showErrorMessage() {
                const errorDiv = document.createElement('div');
                errorDiv.style.cssText = `
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0, 0, 0, 0.8);
                    color: white;
                    padding: 20px;
                    border-radius: 10px;
                    z-index: 100;
                    text-align: center;
                `;
                errorDiv.innerHTML = `
                    <h3>è§†é¢‘åŠ è½½é‡åˆ°é—®é¢˜</h3>
                    <p>æ­£åœ¨å°è¯•åŠ è½½å…¶ä»–è§†é¢‘...</p>
                    <button onclick="location.reload()" style="
                        background: #DC143C;
                        color: white;
                        border: none;
                        padding: 10px 20px;
                        border-radius: 5px;
                        cursor: pointer;
                        margin-top: 10px;
                    ">åˆ·æ–°é¡µé¢</button>
                `;
                this.heroSection.appendChild(errorDiv);
                
                // 5ç§’åè‡ªåŠ¨ç§»é™¤é”™è¯¯ä¿¡æ¯
                setTimeout(() => {
                    if (errorDiv && errorDiv.parentNode) {
                        errorDiv.remove();
                        this.hasShownError = false;
                    }
                }, 5000);
            }

            setupMouseDetection() {
                this.showSimpleSoundTip();
                this.setupPageClickListener();
            }

            showSimpleSoundTip() {
                const soundTip = document.createElement('div');
                soundTip.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0, 0, 0, 0.8);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 8px;
                    z-index: 10000;
                    font-size: 14px;
                    font-family: 'Noto Sans SC', sans-serif;
                    pointer-events: none;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                `;
                soundTip.textContent = 'ç‚¹å‡»ä»»æ„ä½ç½®å¯ç”¨å£°éŸ³';

                document.body.appendChild(soundTip);

                setTimeout(() => {
                    soundTip.style.opacity = '1';
                }, 100);

                setTimeout(() => {
                    if (soundTip && soundTip.parentNode) {
                        soundTip.style.opacity = '0';
                        setTimeout(() => {
                            if (soundTip && soundTip.parentNode) {
                                soundTip.remove();
                            }
                        }, 300);
                    }
                }, 3000);

                this.soundTip = soundTip;
            }

            setupPageClickListener() {
                const enableSound = (event) => {
                    const clickedElement = event.target;
                    const isInteractiveElement = 
                        clickedElement.tagName === 'BUTTON' ||
                        clickedElement.tagName === 'A' ||
                        clickedElement.tagName === 'INPUT' ||
                        clickedElement.tagName === 'SELECT' ||
                        clickedElement.tagName === 'TEXTAREA' ||
                        clickedElement.closest('button') ||
                        clickedElement.closest('a') ||
                        clickedElement.closest('.modal') ||
                        clickedElement.closest('.nav-menu');

                    if (isInteractiveElement) {
                        return;
                    }

                    if (!this.soundEnabled && this.videoElement) {
                        this.soundEnabled = true;
                        this.videoElement.muted = false;
                        console.log('ç”¨æˆ·ç‚¹å‡»é¡µé¢å¯ç”¨è§†é¢‘å£°éŸ³');
                        
                        if (this.soundTip) {
                            this.soundTip.style.opacity = '0';
                            setTimeout(() => {
                                if (this.soundTip && this.soundTip.parentNode) {
                                    this.soundTip.remove();
                                    this.soundTip = null;
                                }
                            }, 300);
                        }

                        document.removeEventListener('click', enableSound);
                    }
                };

                document.addEventListener('click', enableSound);
            }

            // æ‰‹åŠ¨åˆ‡æ¢è§†é¢‘ï¼ˆç”¨äºæµ‹è¯•ï¼‰
            loadRandomVideo() {
                this.loadNextVideo();
            }

            // è·å–æ’­æ”¾ç»Ÿè®¡ä¿¡æ¯
            getPlaybackStats() {
                return {
                    totalVideos: this.videos.length,
                    playedVideos: this.playedVideos.size,
                    remainingVideos: this.videos.length - this.playedVideos.size,
                    currentVideo: this.currentVideoIndex + 1,
                    playlistProgress: `${this.currentPlaylistIndex}/${this.availableVideos.length}`
                };
            }
        }

        // åˆå§‹åŒ–è§†é¢‘èƒŒæ™¯ç®¡ç†å™¨
        const videoBackgroundManager = new VideoBackgroundManager();
        
        // ===== è®¤è¯ç³»ç»Ÿå®Œæ•´JavaScript ===== 
        
        // å…¨å±€å¸¸é‡å®šä¹‰
        const LEVEL_OPTIONS = [
            { value: 'beginner', label: 'åˆå­¦è€…' },
            { value: 'intermediate', label: 'ä¸­çº§' },
            { value: 'advanced', label: 'é«˜çº§' },
            { value: 'professional', label: 'ä¸“ä¸š' }
        ];

        // ç”ŸæˆæŠ€æœ¯æ°´å¹³é€‰é¡¹çš„è¾…åŠ©å‡½æ•°
        function generateLevelOptions(includeEmpty = false) {
            let options = '';
            if (includeEmpty) {
                options += '<option value="">è¯·é€‰æ‹©</option>';
            }
            LEVEL_OPTIONS.forEach(option => {
                options += `<option value="${option.value}">${option.label}</option>`;
            });
            return options;
        }

        // æ¨¡æ€æ¡†ç®¡ç†å‡½æ•°
        window.openModal = function(modalId) {
            console.log('ğŸ”¥ å°è¯•æ‰“å¼€æ¨¡æ€æ¡†:', modalId);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('show');
                modal.style.display = 'flex';
                modal.style.zIndex = '10000';
                document.body.style.overflow = 'hidden';
                console.log('âœ… æ¨¡æ€æ¡†å·²æ‰“å¼€:', modalId);
            } else {
                console.error('âŒ æ‰¾ä¸åˆ°æ¨¡æ€æ¡†:', modalId);
            }
        };
        
        window.closeModal = function(modalId) {
            console.log('ğŸ”¥ å°è¯•å…³é—­æ¨¡æ€æ¡†:', modalId);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('show');
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                console.log('âœ… æ¨¡æ€æ¡†å·²å…³é—­:', modalId);
            } else {
                console.error('âŒ æ‰¾ä¸åˆ°æ¨¡æ€æ¡†:', modalId);
            }
        };
        
        window.switchModal = function(from, to) {
            console.log('ğŸ”¥ åˆ‡æ¢æ¨¡æ€æ¡†:', from, 'â†’', to);
            window.closeModal(from);
            window.openModal(to);
        };

        // æ˜¾ç¤ºé€šçŸ¥æ¶ˆæ¯
        function showNotification(message, type = 'info', duration = 5000) {
            if (window.authModule && typeof window.authModule.showNotification === 'function') {
                window.authModule.showNotification(message, type, duration);
                return;
            }
            console.log(`é€šçŸ¥: ${message} (${type})`);
        }
        
        // æ›´æ–°ç”¨æˆ·ç•Œé¢
        function updateUserInterface(userData) {
            console.log('ğŸ”„ æ›´æ–°ç”¨æˆ·ç•Œé¢:', userData);
            
            // éšè—ç™»å½•æ³¨å†ŒæŒ‰é’®ï¼Œæ˜¾ç¤ºç”¨æˆ·èœå•
            const navAuth = document.querySelector('.nav-auth');
            if (navAuth) {
                navAuth.innerHTML = `
                    <div class="user-menu">
                        <span class="username">æ¬¢è¿ï¼Œ${userData.name}</span>
                        <button class="btn-logout" onclick="handleLogout()">é€€å‡º</button>
                    </div>
                `;
            }
        }
        
        // è·å–æŠ€æœ¯æ°´å¹³æ–‡æœ¬
        function getLevelText(level) {
            const levels = {
                'beginner': 'åˆå­¦è€…',
                'intermediate': 'ä¸­çº§',
                'advanced': 'é«˜çº§',
                'professional': 'ä¸“ä¸š'
            };
            return levels[level] || 'åˆå­¦è€…';
        }
        
        // å¤„ç†é€€å‡ºç™»å½•
        function handleLogout() {
            console.log('ğŸ‘‹ ç”¨æˆ·é€€å‡ºç™»å½•');
            
            // æ¸…é™¤å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯
            localStorage.removeItem('spinmatch_user');
            localStorage.removeItem('spinmatch_logged_in');
            sessionStorage.removeItem('spinmatch_user');
            sessionStorage.removeItem('spinmatch_logged_in');
            
            // æ˜¾ç¤ºé€€å‡ºæ¶ˆæ¯
            showNotification('å·²æˆåŠŸé€€å‡ºç™»å½•', 'info');
            
            // æ¢å¤ç™»å½•æ³¨å†ŒæŒ‰é’®
            const navAuth = document.querySelector('.nav-auth');
            if (navAuth) {
                navAuth.innerHTML = `
                    <button class="btn-login" onclick="openModal('loginModal')">ç™»å½•</button>
                    <button class="btn-register" onclick="openModal('registerModal')">æ³¨å†Œ</button>
                `;
            }
        }
        
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const user = localStorage.getItem('spinmatch_user') || sessionStorage.getItem('spinmatch_user');
            const isLoggedIn = localStorage.getItem('spinmatch_logged_in') || sessionStorage.getItem('spinmatch_logged_in');
            
            if (user && isLoggedIn === 'true') {
                try {
                    const userData = JSON.parse(user);
                    console.log('ğŸ”„ å‘ç°å·²ç™»å½•ç”¨æˆ·:', userData);
                    updateUserInterface(userData);
                } catch (error) {
                    console.error('âŒ ç”¨æˆ·æ•°æ®è§£æå¤±è´¥:', error);
                    localStorage.removeItem('spinmatch_user');
                    localStorage.removeItem('spinmatch_logged_in');
                    sessionStorage.removeItem('spinmatch_user');
                    sessionStorage.removeItem('spinmatch_logged_in');
                }
            }
        }

        // ç»Ÿä¸€åˆå§‹åŒ–æ‰€æœ‰è¡¨å•é€‰é¡¹
        function initializeAllForms() {
            const registerLevelSelect = document.getElementById('registerLevel');
            if (registerLevelSelect) {
                registerLevelSelect.innerHTML = generateLevelOptions(true);
            }
        }
        
        // ç¡®ä¿è®¤è¯ç³»ç»Ÿæ­£ç¡®åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ”§ ç¡®ä¿è®¤è¯ç³»ç»Ÿå·²æ­£ç¡®åˆå§‹åŒ–');
            
            // æ·»åŠ æ¨¡æ€æ¡†èƒŒæ™¯ç‚¹å‡»å…³é—­åŠŸèƒ½
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal') && e.target.classList.contains('show')) {
                    console.log('ğŸ¯ æ¨¡æ€æ¡†èƒŒæ™¯è¢«ç‚¹å‡»ï¼Œå…³é—­æ¨¡æ€æ¡†');
                    const modalId = e.target.id;
                    window.closeModal(modalId);
                }
            });
            
            // æ·»åŠ ESCé”®å…³é—­æ¨¡æ€æ¡†åŠŸèƒ½
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const openModal = document.querySelector('.modal.show');
                    if (openModal) {
                        console.log('ğŸ¯ ESCé”®è¢«æŒ‰ä¸‹ï¼Œå…³é—­æ¨¡æ€æ¡†');
                        window.closeModal(openModal.id);
                    }
                }
            });
            
            // åˆå§‹åŒ–æ‰€æœ‰è¡¨å•é€‰é¡¹
            initializeAllForms();
            
            // æ£€æŸ¥æ˜¯å¦å·²ç»ç™»å½•
            checkLoginStatus();
            
            // æ£€æŸ¥è®¤è¯æŒ‰é’®æ˜¯å¦å¯ç‚¹å‡»
            const loginBtn = document.querySelector('.btn-login');
            const registerBtn = document.querySelector('.btn-register');
            
            console.log('ğŸ” æ£€æŸ¥æŒ‰é’®å…ƒç´ :');
            console.log('- ç™»å½•æŒ‰é’®:', loginBtn ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨');
            console.log('- æ³¨å†ŒæŒ‰é’®:', registerBtn ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨');
            
            if (loginBtn) {
                loginBtn.addEventListener('click', function(e) {
                    console.log('ğŸ¯ ç™»å½•æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼', e);
                    e.preventDefault();
                    window.openModal('loginModal');
                });
            }
            
            if (registerBtn) {
                registerBtn.addEventListener('click', function(e) {
                    console.log('ğŸ¯ æ³¨å†ŒæŒ‰é’®è¢«ç‚¹å‡»äº†ï¼', e);
                    e.preventDefault();
                    window.openModal('registerModal');
                });
            }
            
            // æ›´æ–°è®¤è¯UI
            if (window.simpleAuth) {
                window.simpleAuth.updateUI();
                console.log('âœ… è®¤è¯ç³»ç»ŸUIå·²æ›´æ–°');
            } else {
                console.log('âš ï¸ ç®€å•è®¤è¯ç³»ç»ŸæœªåŠ è½½ï¼Œä½¿ç”¨å®Œæ•´è®¤è¯ç³»ç»Ÿ');
            }
        });
    </script>
    
    <!-- å¼•å…¥æ ¸å¿ƒæ¨¡å— -->
    <!-- <script src="../scripts/index.js"></script> -->
</body>
</html> 